"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _user = _interopRequireDefault(require("../models/user"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable prettier/prettier */
const userObject = req => {
  return new _user.default({ ...req.body
  });
};

const registerUser = user => {
  return user.save();
};

const getUserByEmail = email => {
  return _user.default.findOne({
    email
  });
};

const getAllUsers = creator => {
  return _user.default.find({
    $and: [{
      creator
    }, {
      deleted: false
    }]
  }).select("-password");
};

const getUserById = _id => {
  return _user.default.findOne({
    _id
  });
};

const updateUser = (id, user) => {
  return _user.default.updateOne({
    _id: id
  }, {
    $set: user
  });
};

const deleteUser = _id => {
  return _user.default.findOneAndDelete({
    _id
  });
};

const userService = {
  registerUser,
  getUserByEmail,
  getUserById,
  updateUser,
  userObject,
  getAllUsers,
  deleteUser
};
var _default = userService;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9hcGkvc2VydmljZXMvdXNlci5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInVzZXJPYmplY3QiLCJyZXEiLCJVc2VyIiwiYm9keSIsInJlZ2lzdGVyVXNlciIsInVzZXIiLCJzYXZlIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbCIsImZpbmRPbmUiLCJnZXRBbGxVc2VycyIsImNyZWF0b3IiLCJmaW5kIiwiJGFuZCIsImRlbGV0ZWQiLCJzZWxlY3QiLCJnZXRVc2VyQnlJZCIsIl9pZCIsInVwZGF0ZVVzZXIiLCJpZCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJkZWxldGVVc2VyIiwiZmluZE9uZUFuZERlbGV0ZSIsInVzZXJTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7Ozs7QUFEQTtBQUdBLE1BQU1BLFVBQVUsR0FBSUMsR0FBRCxJQUFTO0FBQ3hCLFNBQU8sSUFBSUMsYUFBSixDQUFTLEVBQ1osR0FBR0QsR0FBRyxDQUFDRTtBQURLLEdBQVQsQ0FBUDtBQUdILENBSkQ7O0FBTUEsTUFBTUMsWUFBWSxHQUFJQyxJQUFELElBQVU7QUFDM0IsU0FBT0EsSUFBSSxDQUFDQyxJQUFMLEVBQVA7QUFDSCxDQUZEOztBQUdBLE1BQU1DLGNBQWMsR0FBSUMsS0FBRCxJQUFXO0FBQzlCLFNBQU9OLGNBQUtPLE9BQUwsQ0FBYTtBQUFFRCxJQUFBQTtBQUFGLEdBQWIsQ0FBUDtBQUNILENBRkQ7O0FBR0EsTUFBTUUsV0FBVyxHQUFJQyxPQUFELElBQWE7QUFFN0IsU0FBT1QsY0FBS1UsSUFBTCxDQUFVO0FBQUVDLElBQUFBLElBQUksRUFBRSxDQUFDO0FBQUVGLE1BQUFBO0FBQUYsS0FBRCxFQUFjO0FBQUVHLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQWQ7QUFBUixHQUFWLEVBQXVEQyxNQUF2RCxDQUE4RCxXQUE5RCxDQUFQO0FBQ0gsQ0FIRDs7QUFJQSxNQUFNQyxXQUFXLEdBQUlDLEdBQUQsSUFBUztBQUN6QixTQUFPZixjQUFLTyxPQUFMLENBQWE7QUFBRVEsSUFBQUE7QUFBRixHQUFiLENBQVA7QUFDSCxDQUZEOztBQUdBLE1BQU1DLFVBQVUsR0FBRyxDQUFDQyxFQUFELEVBQUtkLElBQUwsS0FBYztBQUM3QixTQUFPSCxjQUFLa0IsU0FBTCxDQUNIO0FBQUVILElBQUFBLEdBQUcsRUFBRUU7QUFBUCxHQURHLEVBRUg7QUFDSUUsSUFBQUEsSUFBSSxFQUFFaEI7QUFEVixHQUZHLENBQVA7QUFNSCxDQVBEOztBQVFBLE1BQU1pQixVQUFVLEdBQUlMLEdBQUQsSUFBUztBQUN4QixTQUFPZixjQUFLcUIsZ0JBQUwsQ0FBc0I7QUFBRU4sSUFBQUE7QUFBRixHQUF0QixDQUFQO0FBQ0gsQ0FGRDs7QUFHQSxNQUFNTyxXQUFXLEdBQUc7QUFDaEJwQixFQUFBQSxZQURnQjtBQUVoQkcsRUFBQUEsY0FGZ0I7QUFHaEJTLEVBQUFBLFdBSGdCO0FBSWhCRSxFQUFBQSxVQUpnQjtBQUtoQmxCLEVBQUFBLFVBTGdCO0FBTWhCVSxFQUFBQSxXQU5nQjtBQU9oQlksRUFBQUE7QUFQZ0IsQ0FBcEI7ZUFTZUUsVyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyICovXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcblxuY29uc3QgdXNlck9iamVjdCA9IChyZXEpID0+IHtcbiAgICByZXR1cm4gbmV3IFVzZXIoe1xuICAgICAgICAuLi5yZXEuYm9keVxuICAgIH0pO1xufVxuXG5jb25zdCByZWdpc3RlclVzZXIgPSAodXNlcikgPT4ge1xuICAgIHJldHVybiB1c2VyLnNhdmUoKTtcbn1cbmNvbnN0IGdldFVzZXJCeUVtYWlsID0gKGVtYWlsKSA9PiB7XG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xufVxuY29uc3QgZ2V0QWxsVXNlcnMgPSAoY3JlYXRvcikgPT4ge1xuXG4gICAgcmV0dXJuIFVzZXIuZmluZCh7ICRhbmQ6IFt7IGNyZWF0b3IgfSwgeyBkZWxldGVkOiBmYWxzZSB9XSB9KS5zZWxlY3QoXCItcGFzc3dvcmRcIik7XG59XG5jb25zdCBnZXRVc2VyQnlJZCA9IChfaWQpID0+IHtcbiAgICByZXR1cm4gVXNlci5maW5kT25lKHsgX2lkIH0pO1xufVxuY29uc3QgdXBkYXRlVXNlciA9IChpZCwgdXNlcikgPT4ge1xuICAgIHJldHVybiBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgeyBfaWQ6IGlkIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICRzZXQ6IHVzZXJcbiAgICAgICAgfVxuICAgICk7XG59XG5jb25zdCBkZWxldGVVc2VyID0gKF9pZCkgPT4ge1xuICAgIHJldHVybiBVc2VyLmZpbmRPbmVBbmREZWxldGUoeyBfaWQgfSk7XG59XG5jb25zdCB1c2VyU2VydmljZSA9IHtcbiAgICByZWdpc3RlclVzZXIsXG4gICAgZ2V0VXNlckJ5RW1haWwsXG4gICAgZ2V0VXNlckJ5SWQsXG4gICAgdXBkYXRlVXNlcixcbiAgICB1c2VyT2JqZWN0LFxuICAgIGdldEFsbFVzZXJzLFxuICAgIGRlbGV0ZVVzZXJcbn1cbmV4cG9ydCBkZWZhdWx0IHVzZXJTZXJ2aWNlOyJdfQ==