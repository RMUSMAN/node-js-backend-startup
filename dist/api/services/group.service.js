"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _group = _interopRequireDefault(require("../models/group"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable prettier/prettier */
const groupObject = req => {
  return new _group.default({ ...req.body
  });
};

const getAllGroups = creator => {
  return _group.default.find({
    creator
  }).populate([{
    path: 'creator members',
    select: 'firstName lastName'
  }, {
    path: 'site',
    select: 'name'
  }]);
};

const saveGroup = group => {
  return group.save().then(t => t.populate([{
    path: 'creator members',
    select: 'firstName lastName'
  }, {
    path: 'site',
    select: 'name'
  }]).execPopulate());
};

const getGroup = _id => {
  return _group.default.findOne({
    _id
  }).populate([{
    path: 'creator',
    select: 'firstName lastName'
  }, {
    path: 'site',
    select: 'name'
  }]);
};

const updateGroup = (id, group) => {
  return _group.default.updateOne({
    _id: id
  }, {
    $set: group
  });
};

const deleteGroup = _id => {
  return _group.default.findOneAndDelete({
    _id
  });
};

const userService = {
  saveGroup,
  getGroup,
  updateGroup,
  groupObject,
  getAllGroups,
  deleteGroup
};
var _default = userService;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9hcGkvc2VydmljZXMvZ3JvdXAuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJncm91cE9iamVjdCIsInJlcSIsIkdyb3VwIiwiYm9keSIsImdldEFsbEdyb3VwcyIsImNyZWF0b3IiLCJmaW5kIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0Iiwic2F2ZUdyb3VwIiwiZ3JvdXAiLCJzYXZlIiwidGhlbiIsInQiLCJleGVjUG9wdWxhdGUiLCJnZXRHcm91cCIsIl9pZCIsImZpbmRPbmUiLCJ1cGRhdGVHcm91cCIsImlkIiwidXBkYXRlT25lIiwiJHNldCIsImRlbGV0ZUdyb3VwIiwiZmluZE9uZUFuZERlbGV0ZSIsInVzZXJTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7Ozs7QUFEQTtBQUdBLE1BQU1BLFdBQVcsR0FBSUMsR0FBRCxJQUFTO0FBQ3pCLFNBQU8sSUFBSUMsY0FBSixDQUFVLEVBQ2IsR0FBR0QsR0FBRyxDQUFDRTtBQURNLEdBQVYsQ0FBUDtBQUdILENBSkQ7O0FBS0EsTUFBTUMsWUFBWSxHQUFJQyxPQUFELElBQWE7QUFDOUIsU0FBT0gsZUFBTUksSUFBTixDQUFXO0FBQUVELElBQUFBO0FBQUYsR0FBWCxFQUF3QkUsUUFBeEIsQ0FBaUMsQ0FBQztBQUFFQyxJQUFBQSxJQUFJLEVBQUMsaUJBQVA7QUFBMEJDLElBQUFBLE1BQU0sRUFBRTtBQUFsQyxHQUFELEVBQTBEO0FBQUVELElBQUFBLElBQUksRUFBRSxNQUFSO0FBQWdCQyxJQUFBQSxNQUFNLEVBQUU7QUFBeEIsR0FBMUQsQ0FBakMsQ0FBUDtBQUNILENBRkQ7O0FBR0EsTUFBTUMsU0FBUyxHQUFJQyxLQUFELElBQVc7QUFDekIsU0FBT0EsS0FBSyxDQUFDQyxJQUFOLEdBQWFDLElBQWIsQ0FBa0JDLENBQUMsSUFBSUEsQ0FBQyxDQUFDUCxRQUFGLENBQVcsQ0FBQztBQUFFQyxJQUFBQSxJQUFJLEVBQUMsaUJBQVA7QUFBMEJDLElBQUFBLE1BQU0sRUFBRTtBQUFsQyxHQUFELEVBQTBEO0FBQUVELElBQUFBLElBQUksRUFBRSxNQUFSO0FBQWdCQyxJQUFBQSxNQUFNLEVBQUU7QUFBeEIsR0FBMUQsQ0FBWCxFQUF1R00sWUFBdkcsRUFBdkIsQ0FBUDtBQUNILENBRkQ7O0FBSUEsTUFBTUMsUUFBUSxHQUFJQyxHQUFELElBQVM7QUFDdEIsU0FBT2YsZUFBTWdCLE9BQU4sQ0FBYztBQUFFRCxJQUFBQTtBQUFGLEdBQWQsRUFBdUJWLFFBQXZCLENBQWdDLENBQUM7QUFBRUMsSUFBQUEsSUFBSSxFQUFDLFNBQVA7QUFBa0JDLElBQUFBLE1BQU0sRUFBRTtBQUExQixHQUFELEVBQWtEO0FBQUVELElBQUFBLElBQUksRUFBRSxNQUFSO0FBQWdCQyxJQUFBQSxNQUFNLEVBQUU7QUFBeEIsR0FBbEQsQ0FBaEMsQ0FBUDtBQUNILENBRkQ7O0FBSUEsTUFBTVUsV0FBVyxHQUFHLENBQUNDLEVBQUQsRUFBS1QsS0FBTCxLQUFlO0FBQy9CLFNBQU9ULGVBQU1tQixTQUFOLENBQ0g7QUFBRUosSUFBQUEsR0FBRyxFQUFFRztBQUFQLEdBREcsRUFFSDtBQUNJRSxJQUFBQSxJQUFJLEVBQUVYO0FBRFYsR0FGRyxDQUFQO0FBTUgsQ0FQRDs7QUFRQSxNQUFNWSxXQUFXLEdBQUlOLEdBQUQsSUFBUztBQUN6QixTQUFPZixlQUFNc0IsZ0JBQU4sQ0FBdUI7QUFBRVAsSUFBQUE7QUFBRixHQUF2QixDQUFQO0FBQ0gsQ0FGRDs7QUFHQSxNQUFNUSxXQUFXLEdBQUc7QUFDaEJmLEVBQUFBLFNBRGdCO0FBRWhCTSxFQUFBQSxRQUZnQjtBQUdoQkcsRUFBQUEsV0FIZ0I7QUFJaEJuQixFQUFBQSxXQUpnQjtBQUtoQkksRUFBQUEsWUFMZ0I7QUFNaEJtQixFQUFBQTtBQU5nQixDQUFwQjtlQVFlRSxXIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcHJldHRpZXIvcHJldHRpZXIgKi9cbmltcG9ydCBHcm91cCBmcm9tIFwiLi4vbW9kZWxzL2dyb3VwXCI7XG5cbmNvbnN0IGdyb3VwT2JqZWN0ID0gKHJlcSkgPT4ge1xuICAgIHJldHVybiBuZXcgR3JvdXAoe1xuICAgICAgICAuLi5yZXEuYm9keVxuICAgIH0pO1xufVxuY29uc3QgZ2V0QWxsR3JvdXBzID0gKGNyZWF0b3IpID0+IHtcbiAgICByZXR1cm4gR3JvdXAuZmluZCh7IGNyZWF0b3IgfSkucG9wdWxhdGUoW3sgcGF0aDonY3JlYXRvciBtZW1iZXJzJywgc2VsZWN0OiAnZmlyc3ROYW1lIGxhc3ROYW1lJ30sIHsgcGF0aDogJ3NpdGUnLCBzZWxlY3Q6ICduYW1lJ31dKTtcbn1cbmNvbnN0IHNhdmVHcm91cCA9IChncm91cCkgPT4ge1xuICAgIHJldHVybiBncm91cC5zYXZlKCkudGhlbih0ID0+IHQucG9wdWxhdGUoW3sgcGF0aDonY3JlYXRvciBtZW1iZXJzJywgc2VsZWN0OiAnZmlyc3ROYW1lIGxhc3ROYW1lJ30sIHsgcGF0aDogJ3NpdGUnLCBzZWxlY3Q6ICduYW1lJ31dKS5leGVjUG9wdWxhdGUoKSk7XG59XG5cbmNvbnN0IGdldEdyb3VwID0gKF9pZCkgPT4ge1xuICAgIHJldHVybiBHcm91cC5maW5kT25lKHsgX2lkIH0pLnBvcHVsYXRlKFt7IHBhdGg6J2NyZWF0b3InLCBzZWxlY3Q6ICdmaXJzdE5hbWUgbGFzdE5hbWUnfSwgeyBwYXRoOiAnc2l0ZScsIHNlbGVjdDogJ25hbWUnfV0pO1xufVxuXG5jb25zdCB1cGRhdGVHcm91cCA9IChpZCwgZ3JvdXApID0+IHtcbiAgICByZXR1cm4gR3JvdXAudXBkYXRlT25lKFxuICAgICAgICB7IF9pZDogaWQgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJHNldDogZ3JvdXBcbiAgICAgICAgfVxuICAgICk7XG59XG5jb25zdCBkZWxldGVHcm91cCA9IChfaWQpID0+IHtcbiAgICByZXR1cm4gR3JvdXAuZmluZE9uZUFuZERlbGV0ZSh7IF9pZCB9KTtcbn1cbmNvbnN0IHVzZXJTZXJ2aWNlID0ge1xuICAgIHNhdmVHcm91cCxcbiAgICBnZXRHcm91cCxcbiAgICB1cGRhdGVHcm91cCxcbiAgICBncm91cE9iamVjdCxcbiAgICBnZXRBbGxHcm91cHMsXG4gICAgZGVsZXRlR3JvdXBcbn1cbmV4cG9ydCBkZWZhdWx0IHVzZXJTZXJ2aWNlOyJdfQ==